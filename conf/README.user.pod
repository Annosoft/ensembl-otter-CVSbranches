=pod

=head1 How to setup user authentication

=head1 SYNOPSIS

This document describes how to setup user authentication on the otter server.

=head1 DESCRIPTION

The authentication takes place using a very similar system to the Apache .htaccess
mechanism and uses the standard HTTP Header.  It is slightly different to the HTTP
directive in that no Realm is really setup and the response is not standard.

=head1 LOGIC

-----species.dat-------
[human]
...
[chimp]
...
[mouse]
...
-----species.dat-------

-----.htpasswd--------
external_user:encoded(pass)
userA:encoded(pass)
userB:encoded(pass)
-----.htpasswd--------

-----.htgroups--------
mouse: userA
chimp: userB userA
human: external_user userA
-----.htgroups--------

Note the groups in .htgroups match the datasets in species.dat.

In the example above the following is true:
 - userA has access to datasets mouse, chimp and human.
 - userB has access to dataset chimp.
 - external_user has access to dataset human.

Setup uses $OTTER_SERVER_ROOT/conf/otter_user.conf and user_manage.  Editing of the 
later is required from the distributed version (see below).  The former is editable 
to change the name of the password and groups files.  If this is done the otter_srv 
must be changed to acomodate the change.

The B<client> uses the password=*user_pass* line in the [client] stanza of 
~/.otter_config or the password supplied at the prompt.

=head1 STEP BY STEP

1. Install HTTPD-User-Manage-1.61 (CPAN or http://stein.cshl.org/WWW/software/user_manage/)
   Also check MIME::Base64 is installed.

2. copy user_manage to somewhere in your $PATH

3. edit user_manage to add "use lib './scripts';", "use OtterDefs;" 
   and set "$CONFIG_FILE = $OTTER_SERVER_ROOT .'/conf/otter_user.conf';"

4. cd to $OTTER_SERVER_ROOT

5. run user_manage to add users and users to groups. (see user_manage help)
   This creates the .htpasswd and .htgroups files in the $OTTER_SERVER_ROOT
   directory.  The removal of these files will return the server to a 
   non-auth checking server.

6. check out new users with "user_manage list"

7. setup ~/.otter_config or just enter password at the prompt.

8. start server and try to connect

=head1 NOTES

$OTTER_SERVER_ROOT = location set in OtterDefs.pm

=cut
