#!/usr/local/bin/perl5.6.1 -w

### test_lace_client

use strict;
use Bio::Otter::Lace::AceDatabase;
use Bio::Otter::Lace::Client;
use Data::Dumper;

{
    my $cl = Bio::Otter::Lace::Client->new;
    $cl->host('ecs1d');
    $cl->port(39312);
    $cl->write_access(1);
    
    #my ($ds) = grep $_->name eq 'human_chr20_with_anal_end_feb',
    my ($ds) = grep $_->name eq 'otter_chr9p12',
        $cl->get_all_DataSets;
    
    #foreach my $chr ($ds->get_all_Chromosomes) {
    #    print "chr: ", Dumper($chr);
    #}
    
    my $cs_list = $ds->get_all_CloneSequences;
    
    $ds->selected_CloneSequences([@$cs_list[2..7]]);
    print Dumper( $ds->selected_CloneSequences );
    
    my $db = $cl->new_AceDatabase;
    $db->title('lace test');
    $db->make_database_directory;
    $db->write_otter_acefile;
    
    unless ($db->initialize_database) {
        $db->error_flag(1);
        die "Error initialzing database";
    }
    
    system('xace', $db->home);
    
    # At the moment this unlocks the region as well
    $db->save_all_slices;
}


__END__

=head1 NAME - test_lace_client

=head1 AUTHOR

James Gilbert B<email> jgrg@sanger.ac.uk

